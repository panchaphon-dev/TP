<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background: #000;
            padding: 20px;
        }

        .hidden {
            display: none !important;
        }

        .admin-nav {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background: #111;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--gold);
        }

        .tab-btn {
            background: transparent;
            color: #888;
            border: none;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 1rem;
        }

        .tab-btn.active {
            color: var(--gold);
            font-weight: bold;
            border-bottom: 2px solid var(--gold);
        }

        table {
            width: 100%;
            margin-top: 20px;
            border-collapse: collapse;
        }

        th,
        td {
            padding: 10px;
            border-bottom: 1px solid #333;
            text-align: left;
            color: #ccc;
        }

        th {
            color: var(--gold);
        }
    </style>
</head>

<body>

    <div id="admin-login"
        style="position:fixed; top:0; left:0; width:100%; height:100%; background:black; display:flex; align-items:center; justify-content:center;">
        <div style="text-align:center; padding:40px; border:1px solid var(--gold); border-radius:10px;">
            <h2 style="color:var(--gold); margin-bottom:20px;">ADMIN LOGIN</h2>
            <input type="text" id="a-user" placeholder=""
                style="padding:10px; background:#222; border:1px solid #444; color:white; width:100%; margin-bottom:10px;">
            <input type="password" id="a-pass" placeholder=""
                style="padding:10px; background:#222; border:1px solid #444; color:white; width:100%; margin-bottom:20px;">
            <button onclick="auth()" class="btn-gold" style="width:100%;">LOGIN</button>
            <div style="margin-top:15px;"><a href="index.html" style="color:#666;">Back to Shop</a></div>
        </div>
    </div>

    <div id="admin-panel" class="hidden">
        <div class="admin-nav">
            <h2 style="color:var(--gold);">DASHBOARD</h2>
            <div>
                <button onclick="goToShop()"
                    style="background:#333; color:white; border:1px solid #444; padding:8px 15px; cursor:pointer;">หน้าร้าน</button>
                <button onclick="logout()"
                    style="background:#ff4d4d; color:white; border:none; padding:8px 15px; cursor:pointer;">ออกระบบ</button>
            </div>
        </div>

        <div>
            <button class="tab-btn active" onclick="switchTab('dashboard')">Overview</button>
            <button class="tab-btn" onclick="switchTab('products')">Products</button>
            <button class="tab-btn" onclick="switchTab('messages')">Messages</button>
            <button class="tab-btn" onclick="switchTab('users')">Users</button>
        </div>

        <div id="tab-dashboard">
            <div style="display:flex; gap:20px; margin-top:20px;">
                <div style="flex:1; background:#111; padding:20px; border-left:4px solid #36a2eb;">Total Sales: <h3
                        id="total-sales">0</h3>
                </div>
                <div style="flex:1; background:#111; padding:20px; border-left:4px solid #ff6384;">Total Cost: <h3
                        id="total-cost">0</h3>
                </div>
                <div style="flex:1; background:#111; padding:20px; border-left:4px solid #00e676;">Profit: <h3
                        id="total-profit">0</h3>
                </div>
            </div>
            <div style="background:#111; padding:20px; margin-top:20px; border-radius:10px;">
                <canvas id="financeChart" height="100"></canvas>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Customer</th>
                        <th>Items</th>
                        <th>Total</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="order-table"></tbody>
            </table>
        </div>

        <div id="tab-products" class="hidden" style="margin-top:20px;">
            <div style="background:#111; padding:20px; margin-bottom:20px;">
                <h4>Add Product</h4>
                <input type="text" id="p-name" placeholder="Name" style="padding:5px;">
                <input type="text" id="p-cat" placeholder="Category" style="padding:5px;">
                <input type="number" id="p-price" placeholder="Price" style="padding:5px;">
                <input type="text" id="p-variants" placeholder="Variants (e.g. S,M,L)" style="padding:5px;">
                <input type="text" id="p-img" placeholder="Image URL" style="padding:5px;">
                <button onclick="addProduct()" class="btn-gold" style="padding:5px 15px;">ADD</button>
            </div>
            <table>
                <thead>
                    <tr>
                        <th>Img</th>
                        <th>Name</th>
                        <th>Variants</th>
                        <th>Price</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="product-table"></tbody>
            </table>
        </div>
 <!-- แชทadminส่งหาลูกค้า -->
        <div id="tab-messages" class="hidden" style="margin-top:20px;">
            <div style="display:flex; height:500px; border:1px solid #ffd500;">
                <div id="chat-list" style="width:30%; background:#111; overflow-y:auto;"></div>
                <div style="width:70%; background:#000; display:flex; flex-direction:column;">
                    <div id="chat-box" style="flex:1; padding:20px; overflow-y:auto;"></div>
                    <div style="padding:10px; background:#111; display:flex;">
                        <input type="text" id="chat-reply"
                            style="flex:1; padding:5px; background:#222; color:white; border:none;">
                        <button onclick="sendReply()" class="btn-gold"
                            style="padding:5px 15px; margin-left:5px;">Send</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="tab-users" class="hidden">
            <table>
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="user-table"></tbody>
            </table>
        </div>
    </div>

    <!-- Edit Product Modal -->
    <div id="edit-modal"
        style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.9); z-index:9999; align-items:center; justify-content:center;">
        <div
            style="background:#111; padding:30px; border-radius:10px; border:2px solid var(--gold); width:500px; max-width:90%;">
            <h3 style="color:var(--gold); margin-bottom:20px; text-align:center;">แก้ไขสินค้า</h3>
            <input type="hidden" id="edit-index">
            <div style="margin-bottom:15px;">
                <label style="color:#ccc; display:block; margin-bottom:5px;">ชื่อสินค้า:</label>
                <input type="text" id="edit-name" placeholder="ชื่อสินค้า"
                    style="width:100%; padding:10px; background:#222; border:1px solid #444; color:white; border-radius:5px;">
            </div>
            <div style="margin-bottom:15px;">
                <label style="color:#ccc; display:block; margin-bottom:5px;">หมวดหมู่:</label>
                <input type="text" id="edit-cat" placeholder="หมวดหมู่ (เช่น Sneaker, Apparel, Accessories)"
                    style="width:100%; padding:10px; background:#222; border:1px solid #444; color:white; border-radius:5px;">
            </div>
            <div style="margin-bottom:15px;">
                <label style="color:#ccc; display:block; margin-bottom:5px;">ราคา:</label>
                <input type="number" id="edit-price" placeholder="ราคา"
                    style="width:100%; padding:10px; background:#222; border:1px solid #444; color:white; border-radius:5px;">
            </div>
            <div style="margin-bottom:15px;">
                <label style="color:#ccc; display:block; margin-bottom:5px;">ตัวเลือก/ไซส์:</label>
                <input type="text" id="edit-variants" placeholder="ตัวเลือก (เช่น 38,39,40,41 หรือ S,M,L)"
                    style="width:100%; padding:10px; background:#222; border:1px solid #444; color:white; border-radius:5px;">
            </div>
            <div style="margin-bottom:20px;">
                <label style="color:#ccc; display:block; margin-bottom:5px;">URL รูปภาพ:</label>
                <input type="text" id="edit-img" placeholder="URL รูปภาพ"
                    style="width:100%; padding:10px; background:#222; border:1px solid #444; color:white; border-radius:5px;">
            </div>
            <div style="display:flex; gap:10px;">
                <button onclick="saveEdit()" class="btn-gold" style="flex:1; padding:10px;">บันทึก</button>
                <button onclick="closeEditModal()"
                    style="flex:1; padding:10px; background:#ff4d4d; color:white; border:none; cursor:pointer; border-radius:5px;">ยกเลิก</button>
            </div>
        </div>
    </div>

    <script src="admin.js"></script>
</body>

</html>